<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Pesquisa | Imóveis Bresolin</title>
    <link rel="icon" href="/static/img/icons/favicon_bresolin_rounded.png" type="image/png">

    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/css/components/card_imovel.css">
    <link rel="stylesheet" href="/static/css/components/card_empreendimento.css">
    <link rel="stylesheet" href="/static/css/pesquisa.css" />
    <link rel="stylesheet" href="/static/css/global.css" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#1c1c1c" />
    <meta name="color-scheme" content="dark" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>

    <!-- Tela de carregamento com animação traçada -->
    <!-- Loader com SVG dividido em duas partes -->
    <div class="loading-container">
        <svg class="logo-animate" viewBox="-0.8 -10.8 21.6 21.6">

            <!-- Telhado -->
            <path id="path-1" d="M 0 0 L 10 -10 L 20 0" stroke="#FFFFFF" stroke-width="0.8" fill="none"
                stroke-linecap="round" stroke-linejoin="round" />

            <!-- Corpo da casa -->
            <path id="path-2" d="M 2 0 V 10 H 18 V 0" stroke="#FFFFFF" stroke-width="0.8" fill="none"
                stroke-linecap="round" stroke-linejoin="round" />

        </svg>
    </div>

    <!-- ===========================
       Cabeçalho com logo e voltar
  ============================ -->
    <header>
        <div class="header-content">

            <!-- Botão Voltar -->
            <div class="header-left">
                <button class="btn-voltar" onclick="history.back()">
                    <img src="/static/img/icons/icons8-back-arrow-100.svg" alt="Voltar">
                </button>
            </div>

            <!-- Título centralizado -->
            <div class="header-center">
                <a href="/">
                    <div class="title_container">
                        <h1>BRESOLIN</h1>
                        <h2>NEGÓCIOS IMOBILIÁRIOS</h2>
                    </div>
                </a>
            </div>

            <!-- Menu direito futuramente -->
            <div class="header-right">
                <!-- vazio por enquanto -->
            </div>

        </div>
    </header>


    <!-- ===========================
       Corpo principal
  ============================ -->
    <main class="conteudo-pesquisa">

        <!-- Painel lateral de filtros -->
        <aside class="filtros">

            <!-- Botão para abrir/fechar os filtros no mobile -->
            <button id="btn-toggle-filtros" class="btn-toggle-filtros">Filtrar Imóveis ▼</button>

            <!-- Conteúdo que será exibido ou escondido -->
            <div class="filtros-conteudo">
                <h3>Filtrar Imóveis</h3>

                <form action="/pesquisa" method="get">
                    <input type="hidden" name="termo" value="{{ termo }}">

                    <!-- TIPO -->
                    <div class="campo">
                        <label for="tipo">Tipo de imóvel</label>
                        <select name="tipo" id="tipo">
                            <option value="">Todos</option>
                            <option value="empreendimento" {% if tipo=='empreendimento' %}selected{% endif %}>
                                Empreendimentos</option>
                            <option value="casa" {% if tipo=='casa' %}selected{% endif %}>Casa</option>
                            <option value="apartamento" {% if tipo=='apartamento' %}selected{% endif %}>Apartamento
                            </option>
                            <option value="loft" {% if tipo=='loft' %}selected{% endif %}>Loft</option>
                            <option value="terreno" {% if tipo=='terreno' %}selected{% endif %}>Terreno</option>
                        </select>
                    </div>

                    <!-- ID
                    <div class="campo">
                        <label for="id">ID do imóvel</label>
                        <input type="text" name="id" id="id" value="{{ request.args.get('id', '') }}"
                            placeholder="Ex: 123">
                    </div> -->

                    <!-- LOCALIZAÇÃO (CIDADE, BAIRRO, UF UNIFICADOS) -->
                    <div class="campo">
                        <label for="localizacao">Localização</label>
                        <input type="text" name="localizacao" id="localizacao" 
                               value="{{ request.args.get('localizacao', '') }}"
                               placeholder="Cidade, Bairro, UF">
                    </div>

                    <!-- PREÇO MÁXIMO -->
                    <div class="campo">
                        <label for="preco-editavel">Preço Máximo</label>
                        <div class="campo-preco-dinamico">
                            <div id="preco-editavel" contenteditable="true" class="preco-digitavel"
                                data-placeholder="Ex: 120.000,00">
                                {% if max_preco %}{{ "{:,}".format(max_preco|int).replace(",", ".") }},00{% endif %}
                            </div>
                        </div>
                        <input type="hidden" name="max_preco" id="max_preco_real">
                    </div>

                    <!-- ÁREA MÍNIMA -->
                    <div class="campo">
                        <label for="area_min">Área mínima (m²)</label>
                        <input type="number" name="area_min" id="area_min"
                            value="{{ request.args.get('area_min', '') }}">
                    </div>

                    <!-- ÁREA MÁXIMA -->
                    <div class="campo">
                        <label for="area_max">Área máxima (m²)</label>
                        <input type="number" name="area_max" id="area_max"
                            value="{{ request.args.get('area_max', '') }}">
                    </div>

                    <!-- QUARTOS -->
                    <div class="campo">
                        <label for="quartos">Quartos</label>
                        <input type="number" name="quartos" id="quartos" value="{{ request.args.get('quartos', '') }}"
                            min="0">
                    </div>

                    <!-- BANHEIROS -->
                    <div class="campo">
                        <label for="banheiros">Banheiros</label>
                        <input type="number" name="banheiros" id="banheiros"
                            value="{{ request.args.get('banheiros', '') }}" min="0">
                    </div>

                    <!-- VAGAS -->
                    <div class="campo">
                        <label for="vagas">Vagas de garagem</label>
                        <input type="number" name="vagas" id="vagas" value="{{ request.args.get('vagas', '') }}"
                            min="0">
                    </div>

                    <!-- ESTÁGIO
                    <div class="campo">
                        <label for="estagio">Estágio da obra</label>
                        <select name="estagio" id="estagio">
                            <option value="">Todos</option>
                            <option value="PRONTA" {% if request.args.get('estagio')=='PRONTA' %}selected{% endif %}>
                                Pronta</option>
                            <option value="EM CONSTRUÇÃO" {% if request.args.get('estagio')=='EM CONSTRUÇÃO'
                                %}selected{% endif %}>Em construção</option>
                        </select>
                    </div> -->

                    <!-- ENTREGA
                    <div class="campo">
                        <label for="entrega">Ano de entrega</label>
                        <input type="text" name="entrega" id="entrega" value="{{ request.args.get('entrega', '') }}"
                            placeholder="Ex: 2026">
                    </div> -->


                    <!-- PISCINA -->
                    <div class="campo">
                        <label>
                            <input type="checkbox" name="piscina" value="1" {% if piscina=='1' %}checked{% endif %}>
                            Possui Piscina
                        </label>
                    </div>

                    <!-- CHURRASQUEIRA -->
                    <div class="campo">
                        <label>
                            <input type="checkbox" name="churrasqueira" value="1" {% if churrasqueira=='1' %}checked{%
                                endif %}>
                            Possui Churrasqueira
                        </label>
                    </div>

                    <!-- BOTÕES -->
                    <div class="grupo-botoes">
                        <button type="submit" class="btn-filtrar">Aplicar Filtros</button>
                        <a href="/pesquisa" class="btn-limpar">Limpar</a>
                    </div>
                </form>
            </div>
        </aside>


        <div class="area-resultados">
            <!-- Barra superior com contador e pesquisa -->
            <div class="barra-superior-mobile">

                 <!-- Pesquisa rápida minimalista -->
                <div class="pesquisa-minimalista">
                    <div class="campo-pesquisa-container">
                        <input type="text" id="termo-pesquisa" placeholder="Digite região, bairro, nome ou ID" autocomplete="off" class="campo-pesquisa-simples" />
                        <div id="sugestoes-pesquisa" class="sugestoes"></div>
                    </div>
                    <button id="limpar-pesquisa" class="btn-limpar-simples">✕</button>
                </div>

                <!-- Contador de resultados -->
                <p class="contador-imoveis">
                    {% set total_resultados = (empreendimentos|length) + (imoveis|length) %}
                    {{ total_resultados }} {{ 'resultados' if total_resultados > 1 else 'resultado' }} {{ 'encontrados' if
                    total_resultados > 1 else 'encontrado' }}
                    {% if empreendimentos|length > 0 and imoveis|length > 0 %}
                    ({{ empreendimentos|length }} {{ 'empreendimentos' if empreendimentos|length > 1 else 'empreendimento'
                    }} e {{ imoveis|length }} {{ 'imóveis' if imoveis|length > 1 else 'imóvel' }})
                    {% elif empreendimentos|length > 0 %}
                    ({{ empreendimentos|length }} {{ 'empreendimentos' if empreendimentos|length > 1 else 'empreendimento'
                    }})
                    {% elif imoveis|length > 0 %}
                    ({{ imoveis|length }} {{ 'imóveis' if imoveis|length > 1 else 'imóvel' }})
                    {% endif %}
                </p>

               
            </div>

             <!-- Barra superior com contador e pesquisa -->
            <div class="barra-superior-desktop">
                <!-- Contador de resultados -->
                <p class="contador-imoveis">
                    {% set total_resultados = (empreendimentos|length) + (imoveis|length) %}
                    {{ total_resultados }} {{ 'resultados' if total_resultados > 1 else 'resultado' }} {{ 'encontrados' if
                    total_resultados > 1 else 'encontrado' }}
                    {% if empreendimentos|length > 0 and imoveis|length > 0 %}
                    ({{ empreendimentos|length }} {{ 'empreendimentos' if empreendimentos|length > 1 else 'empreendimento'
                    }} e {{ imoveis|length }} {{ 'imóveis' if imoveis|length > 1 else 'imóvel' }})
                    {% elif empreendimentos|length > 0 %}
                    ({{ empreendimentos|length }} {{ 'empreendimentos' if empreendimentos|length > 1 else 'empreendimento'
                    }})
                    {% elif imoveis|length > 0 %}
                    ({{ imoveis|length }} {{ 'imóveis' if imoveis|length > 1 else 'imóvel' }})
                    {% endif %}
                </p>

                <!-- Pesquisa rápida minimalista -->
                <div class="pesquisa-minimalista">
                    <div class="campo-pesquisa-container">
                        <input type="text" id="termo-pesquisa-desktop" placeholder="Digite região, bairro, nome ou ID" autocomplete="off" class="campo-pesquisa-simples" />
                        <div id="sugestoes-pesquisa-desktop" class="sugestoes"></div>
                    </div>
                    <button id="limpar-pesquisa-desktop" class="btn-limpar-simples">✕</button>
                </div>
            </div>

            <!-- Área dos resultados -->
            <section class="resultados">
                <!-- Empreendimentos primeiro -->
                {% if empreendimentos %}
                {% for empreendimento in empreendimentos %}
                {% include 'partials/card_empreendimento.html' %}
                {% endfor %}
                {% endif %}

                <!-- Imóveis depois -->
                {% if imoveis %}
                {% for imovel in imoveis %}
                {% include 'partials/card_imovel.html' %}
                {% endfor %}
                {% endif %}

                <!-- Mensagem quando não há resultados -->
                {% if not empreendimentos and not imoveis %}
                <p class="nenhum-encontrado">Nenhum resultado encontrado.</p>
                {% endif %}
            </section>
        </div>
    </main>

    <!----------------------  Rodapé  ----------------->
    <footer class="footer">

        <div class="footer_container">
            <!-- Ícone da casa -->
            <div class="footer_logo">
                <img src="/static/img/icons/white_minimal_home_icon2.svg" alt="Ícone Casa">
            </div>

            <!-- Informações de contato -->
            <div class="footer_info">
                <div class="info_item">
                    <img src="/static/img/icons/icon_user.svg" alt="">
                    <p>Otávio Bresolin</p>
                </div>

                <div class="info_item">
                    <img src="/static/img/icons/icons8-casa-100.svg" alt="">
                    <p>Creci nº 82905</p>
                </div>

                <div class="info_item">
                    <img src="/static/img/icons/icon_phone.svg" alt="">
                    <p>(51) 98170-2045</p>
                </div>

                <a href="https://www.instagram.com/bresolin.imoveis" target="_blank">
                    <div class="info_item">
                        <img src="/static/img/icons/icon_instagram.svg" alt="">
                        <p>@bresolin.imoveis</p>
                        <div class="link-imagem">
                            <img src="/static/img/icons/icon_link.svg" alt="">
                        </div>
                    </div>
                </a>

                <div class="info_item">
                    <img src="/static/img/icons/icon_mail.svg" alt="">
                    <p>negocios@imoveisbresolin.com.br</p>
                </div>

            </div>
        </div>

        <p class="footer_copyright">© 2025 Imóveis Bresolin. Todos os direitos reservados.</p>
    </footer>


    <script src="/static/js/pesquisa.js"></script>
</body>

</html>
